<!DOCTYPE html>
<html lang="en">

<head>
    <title>Shower Presentation Engine</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="shower/themes/ribbon/styles/styles.css">
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }
    </style>
</head>

<body class="shower list">

    <header class="caption">
        <h1>Shower Presentation Engine</h1>
        <p>Yours Truly, Famous Inc.</p>
    </header>

    <section class="slide" id="cover">
        <h2>Sequelize</h2>

        <figure>
            <img class="cover" src="pictures/cover.jpg" alt="Hands on the orange typewriter in a park">
            <figcaption class="copyright right white">
                <a href="http://fiftyfootshadows.net/">© John Carey</a>
            </figcaption>
        </figure>
        <style>
            #cover h2 {
                margin: 30px 0 0;
                color: white;
                text-align: center;
                font-size: 70px;
            }

            #cover p {
                margin: 10px 0 0;
                text-align: center;
                color: white;
                font-style: italic;
                font-size: 20px;
            }

            #cover p a {
                color: white;
            }
        </style>
    </section>

    <section class="slide">
        <h2>
            Introduction
        </h2>


        <ol>
            <li>Реляционные БД</li>
            <li>Основные понятия</li>
            <li>Что мне с этим делать?</li>
            <li>Как быть?</li>
        </ol>
    </section>

    <section class="slide">
        <h2>Реляционные БД</h2>
        <ol>
            <li>SQL (Structured Query Language) – основной интерфейс работы с реляционными БД.</li>
            <li>Целостность данных – это полнота, точность и единообразие данных. </li>
            <li>Транзакция в базе данных – это один или несколько операторов SQL, выполненных в виде последовательности
                операций, представляющих собой единую логическую задачу. </li>
        </ol>
    </section>

    <section class="slide">
        <h3>Соответствие требованиям ACID</h3>
        <ol>
            <li>Атомарность </li>
            <li>Единообразие </li>
            <li>Изолированность</li>
            <li>Надежность</li>
        </ol>
    </section>

    <section class="slide">
        <h2>
            Осноные ядра БД
        </h2>
        <ul>
            <li>Amazon Aurora</li>
            <li>Oracle</li>
            <li>Microsoft SQL Server</li>
            <li>MySQL</li>
            <li>PostgreSQL</li>
            <li>MariaDB</li>
        </ul>
    </section>




    <section class="slide">
        <figure>
            <img class="cover" src="pictures/imgs/Annotation 2019-06-07 114613.png"
                alt="Orange typewriter on a wooden table close-up">
            <figcaption class="copyright right white">
                <a href="http://fiftyfootshadows.net/">© John Carey</a>
            </figcaption>
        </figure>
    </section>

    <section class="slide">
        <figure>
            <img class="cover" src="pictures/imgs/Annotation 2019-06-07 115833.png" alt="SQL Request">
            <figcaption class="copyright right white">
                <a href="http://fiftyfootshadows.net/">© John Carey</a>
            </figcaption>
        </figure>
    </section>

    <section class="slide">
        <h2>А так хотелось...</h2>
    </section>

    <section class="slide">
        <h2>ORM</h2>
        <p>
            ORM (англ. Object-Relational Mapping, рус. объектно-реляционное отображение, или преобразование) —
            технология программирования, которая связывает базы данных с концепциями объектно-ориентированных языков
            программирования, создавая «виртуальную объектную базу данных»
        </p>
    </section>

    <section class='slide'>
        <div class="columns two">
            <div>
                <img src="./pictures/logo-small.png" style='width:100%'>
            </div>
            <div style="display:flex; align-items: center;">
                <img src="./pictures/logo_big.png" alt="" style='width:100%'>
            </div>
        </div>
    </section>

    <section class="slide">
        <h1>
            Sequelize
        </h1>
        <ul>
            <li>Как начать?</li>
            <li>Диалекты</li>
            <li>Sequelize CLI</li>
            <li>Sync and Authenticate</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Начнем...</h2>
        <code>
                $ npm install --save sequelize
        </code><br />
        <code>
                $ npm install --save sequelize-cli
        </code>

    </section>

    <section class="slide">
        <h2>Dialects</h2>
        <code>
                    # One of the following:<br />
                    $ npm install --save pg pg-hstore # Postgres<br />
                    $ npm install --save mysql2<br />
                    $ npm install --save mariadb<br />
                    $ npm install --save sqlite3<br />
                    $ npm install --save tedious # Microsoft SQL Server<br />
            </code>
    </section>

    <section class="slide">
        <pre>
            
                <code>const Sequelize = require('sequelize');</code>
<code>// Option 1: Passing parameters separately</code>
<code>const sequelize = new Sequelize('database', 'username', 
'password', {
host: 'localhost',
dialect: /* one of 'mysql' | 'mariadb' 
| 'postgres' | 'mssql' */
});</code>
<code>// Option 2: Passing a connection URI</code>

    </section>

    <section class="slide">
        <pre>
<code>const sequelize = new Sequelize('postgres://
        user:pass@example.com:5432/dbname');</code>
                
            </pre>
    </section>
    

    <section class="slide">
       <pre>
            <code>sequelize
    .authenticate()
    .then(() => {
        console.log('Connection has been 
        established successfully.');
    })
    .catch(err => {
        console.error('Unable to connect 
        to the database:', err);
    });</code>
       </pre>
    </section>

    <section class="slide">
            <code>$ npx sequelize-cli init</code><br>
            <div style='display:flex; justify-content: center'>
                <img src='./pictures/imgs/Annotation 2019-06-07 133202.png'>
            </div>
    </section>
   
    <section class="slide">
        <pre>
            <code>
sequelize.sync().then(() => {
    // Good boy
})
.catch(err => {
    // Got Hell
});
            </code>
        </pre>
    </section>

    <section class="slide">
        <h2>Basic usage</h2>
        <ul>
            <li>Datatypes</li>
            <li>Model definition</li>
            <li>Model usage</li>
            <li>Operators</li>
        </ul>
    </section>

    <section class='slide'>
        <h3>Datatypes</h3>
        <img src="./pictures/imgs/Annotation 2019-06-07 140209.png" alt="" srcset="">
    </section>

    <section class="slide">
        <h3>Operators</h3>
        <img src="./pictures/imgs/Annotation 2019-06-07 140416.png" alt="" srcset="">
    </section>

    <sections class="slide">
            <h3>Model definition</h3>
            <pre>
                    <code>class <mark>Task</mark> extends <mark>Model</mark> {}
                Task.<mark>init</mark>({
                title: Sequelize.STRING,
                description: Sequelize.TEXT,
                deadline: Sequelize.DATE
                }, { sequelize, modelName: 'task' })
            </code>
            </pre>
                </sections>
    <sections class="slide">
<pre>
       <code>const User = sequelize.define('user', {
            // attributes
            firstName: {
              type: Sequelize.STRING,
              allowNull: false
            },
            lastName: {
              type: Sequelize.STRING
              // allowNull defaults to true
            }
          }, {
            // options
          });
</code>
</pre>
    </sections>

    <section class="slide">
        <h3>Basic usage</h3>
        <pre><code>
Project.findOne({ where: {title: 'aProject'} })
    .then(project => {
    // project will be the first entry of the Projects 
        table with the title 'aProject' || null
    })
</code></pre>
    </section>

    <section class="slide">
<pre>
<code>Project.findOne({
    where: {title: 'aProject'},
    attributes: ['id', ['name', 'title']]
    }).then(project => {
    // project will be the first entry of 
    // the Projects table with the title 'aProject' || null
    // project.get('title') will contain
    // the name of the project
    })
</code>
</pre>
    </section>

    <section class="slide">
<pre>
    <code>Project.findAll({ where: { id: [1,2,3] } })
        .then(projects => {
        // projects will be an array of Projects
        // having the id 1, 2 or 3
        // this is actually doing an IN query
        })
    </code>
</pre>
    </section>

    <section class="slide">
<pre><code>User
.findOrCreate({where: {username: 'sdepold'},
defaults: {job: 'Technical Lead JavaScript'}})
.then(([user, created]) => {
    console.log(user.get({
    plain: true
    }))
    console.log(created)})
        </code></pre>
    </section>

    <section class="slide">
        <pre>
            <code>
Project
.findAndCountAll({ where: {
        title: {
        [Op.like]: 'foo%'
        }}, offset: 10, limit: 2
})
.then(result => { 
    console.log(result.count); console.log(result.rows);
});
            </code>
        </pre>
    </section>
    <!-- <section class="slide">
        <h2>Serious citations</h2>
        <figure>
            <blockquote>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                    aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
                    culpa qui officia.</p>
            </blockquote>
            <figcaption>Marcus Tullius Cicero</figcaption>
        </figure>
    </section> -->

    <section class="slide">
        <h5>update</h5>
        <pre><code>
Project.findOne({ where: {title: 'aProject'} })
    .then(project => {
        project.update({ name: 'New name'})
            .then(project=>{});
    })
</code></pre>
    </section>

    <section class="slide">
            <h5>delete</h5>
            <pre><code>
Project.findOne({ where: {title: 'aProject'} })
    .then(project => {
        project.destroy()
            .then(project=>{});
    })
    </code></pre>
        </section>

    <section class="slide">
        <h5>create</h5>
        <pre><code>
Project.create({ values: {title: 'aProject'} })
    .then(project => {
        
    })
    </code></pre>
    </section>

    <section class="slide">
        <h2>Scopes</h2>
        <img src="./pictures/imgs/Annotation 2019-06-07 144228.png" alt="">
    </section>

    <section class="slide">
            <h2>Hooks</h2>
            <img src="./pictures/imgs/Annotation 2019-06-07 144325.png" alt="">
    </section>
    

    <section class="slide">
        <h2>Code samples</h2>
        <pre>
            <code>&lt;!DOCTYPE html&gt;</code>
            <code class="mark">&lt;html lang="en"&gt;</code>
            <code><mark>&lt;head&gt;</mark> <span class="comment">&lt;!--Comment--&gt;</span></code>
            <code>    &lt;title&gt;Shower&lt;/title&gt;</code>
            <code>    &lt;meta charset="<mark class="important">UTF-8</mark>"&gt;</code>
            <code>    &lt;link rel="stylesheet" href="screen.css"&gt;</code>
            <code><mark>&lt;/head&gt;</mark></code>
        </pre>
    </section>

    <section class="slide">
        <h2 class="shout shrink">You can even shout this way</h2>
    </section>

    <section class="slide">
        <h2>Inner navigation</h2>
        <ol>
            <li>Lets you reveal list items one by one</li>
            <li class="next">To keep some key points</li>
            <li class="next">In secret from audience</li>
            <li class="next">But it will work only once</li>
            <li class="next">Nobody wants to see the same joke twice</li>
        </ol>
    </section>

    <footer class="badge">
        <a href="https://github.com/shower/shower">Fork me on GitHub</a>
    </footer>

    <div class="progress"></div>

    <script src="shower/shower.min.js"></script>
    <!-- Copyright © 3000 Yours Truly, Famous Inc. -->

</body>

</html>